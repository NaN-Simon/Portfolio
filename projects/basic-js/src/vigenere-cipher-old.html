<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>vigenere-cipher</title>
  </head>
  <body>
    <h1>vigenere-cipher</h1>
    <script>
      /**
       * Implement class VigenereCipheringMachine that allows us to create
       * direct and reverse ciphering machines according to task description
       *
       * @example
       *
       * const directMachine = new VigenereCipheringMachine();
       *
       * const reverseMachine = new VigenereCipheringMachine(false);
       *
       * directMachine.encrypt('attack at dawn!', 'alphonse') => 'AEIHQX SX DLLU!'
       *
       * directMachine.decrypt('AEIHQX SX DLLU!', 'alphonse') => 'ATTACK AT DAWN!'
       *
       * reverseMachine.encrypt('attack at dawn!', 'alphonse') => '!ULLD XS XQHIEA'
       *
       * reverseMachine.decrypt('AEIHQX SX DLLU!', 'alphonse') => '!NWAD TA KCATTA'
       *
       */
      const LIBRARY =
        "ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
      function encrypt(message, key) {
        if (
          Array.from(arguments).indexOf(undefined, 0) != -1 ||
          Array.from(arguments).length > 2 ||
          Array.from(arguments).length < 2
        ) {
          return "Incorrect arguments!";
        }
        /*1. приравниваю размер key к message*/
        /* прибавлять по  всему length, а лишнее удалять */
        for (let i = 0; i < message.length; i++) {
          if (key.length < message.length) {
            key += key;
          }
          if (key.length > message.length) {
            key = key.substring(0, key.length - 1);
          }
        }
        let messageArr = Array.from(message.toUpperCase());
        let keyArr = Array.from(key.toUpperCase());
        /*2. нахожу индексы key & message */
        // messageArr.forEach((symb, i) => {
          
          let j = 0; m = 1
          let resultArr = []
          let keySymbArr = []
        for (let i = 0; i < messageArr.length; i++) {
          /* вывести позицию message[symb] в LIBRARY*/
          // console.log(LIBRARY[LIBRARY.indexOf(symb)])

          /*вывести позицию key[symb] из LIBRARY*/
            // console.log(LIBRARY.indexOf(keyArr[i]))
          
          /*сделать масив с key[symb]*/
          if(messageArr[i] !== " "){
            keySymbArr.push(LIBRARY.indexOf(keyArr[i]))
          }
          

      
          /* соединить позицию с буквой*/
          // if (messageArr[i] !== " ") {
          //   resultArr.push(
          //     LIBRARY[LIBRARY.indexOf(messageArr[j]) + keySymbArr[j]]);
          //   j++
          // } else {
          //   resultArr.push(" ")
          // }
         }
         console.log(keySymbArr)
        console.log(resultArr)

        // console.log([LIBRARY, messageArr, keyArr]);
      }
      // function decrypt(arg1, arg2) {}
      // console.log(encrypt("ADFF", "GB")); //GELG
      console.log(encrypt("AD FF", "GB")); //GE LG
      // console.log(encrypt("attack at", "alphonse")); //AEIHQX
      // console.log(encrypt("attack at dawn", 'alphonse'));//AEIHQX SX DLLU



      

    </script>
  </body>
</html>
